# -*- coding: utf-8 -*-
"""
Created on Tue Feb 22 18:06:34 2022

@author: bendzuck
"""
import pandas as pd
import json
import math
import ast
import Prozessfunktionen


#____________________________________
#Eingangsparameter in roher Form
#Zellergebnisse_raw = '[{"Beschreibung":"Ladung","Wert":20.68,"Einheit":"Ah","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Zellformat","Wert":"BLB 2 Pouch","Einheit":"","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Zelltyp","Wert":"Pouchzelle","Einheit":"","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Nennspannung","Wert":3.7,"Einheit":"V","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Energiedichte","Wert":177.87,"Einheit":"WH\/kg","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Zellen pro Jahr","Wert":65355878.3999999985,"Einheit":"","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Gesamtgewicht Zelle","Wert":430.11,"Einheit":"g","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Balancing","Wert":13.29,"Einheit":"%","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Anzahl Wiederholeinheiten","Wert":17,"Einheit":"","Kategorie":"Ma\u00dfe und Fl\u00e4chen"},{"Beschreibung":"Fl\u00e4che Anodenbeschichtung gesamt","Wert":593227.4300000001,"Einheit":"mm\u00b2","Kategorie":"Ma\u00dfe und Fl\u00e4chen"},{"Beschreibung":"Fl\u00e4che Kathodenbeschichtung gesamt","Wert":516920.35,"Einheit":"mm\u00b2","Kategorie":"Ma\u00dfe und Fl\u00e4chen"},{"Beschreibung":"Balancing","Wert":0,"Einheit":"%","Kategorie":"Ma\u00dfe und Fl\u00e4chen"},{"Beschreibung":"Gesamtdichte Anodenbeschichtung","Wert":2.22,"Einheit":"g\/cm\u00b3","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gesamtdichte Kathodenbeschichtung","Wert":0.59,"Einheit":"g\/cm\u00b3","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Anodenkollektor","Wert":27.64,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Kathodenkollektor","Wert":5.85,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Anodenbeschichtung","Wert":71.53,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Kathodenbeschichtung","Wert":146.55,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Separator","Wert":126.25,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Elektrolyt","Wert":52.29,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht H\u00fclle","Wert":0,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gesamtgewicht Zelle","Wert":430.11,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Kilopreis Anodenbeschichtung","Wert":7.37,"Einheit":"\u20ac\/kg","Kategorie":"Kosten"},{"Beschreibung":"Kilopreis Kathodenbeschichtung","Wert":22.28,"Einheit":"\u20ac\/kg","Kategorie":"Kosten"},{"Beschreibung":"Preis Anodenbeschichtung","Wert":0.53,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Kathodenbeschichtung","Wert":3.26,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Anodenkollektor","Wert":0.45,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Kathodenkollektor","Wert":0.18,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Separator","Wert":0.53,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Elektrolyt","Wert":0.39,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis H\u00fclle","Wert":0,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Materialkosten einer Zelle","Wert":5.52,"Einheit":"\u20ac","Kategorie":"Kosten"}]'
#Zellergebnisse_raw = '[{"Beschreibung":"Ladung","Wert":20.68,"Einheit":"Ah","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Zellformat","Wert":"BLB 2 Pouch","Einheit":"","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Zelltyp","Wert":"Pouchzelle","Einheit":"","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Nennspannung","Wert":3.7,"Einheit":"V","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Energiedichte","Wert":177.87,"Einheit":"WH\/kg","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Zellen pro Jahr","Wert":65355878.3999999985,"Einheit":"","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Gesamtgewicht Zelle","Wert":430.11,"Einheit":"g","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Balancing","Wert":13.29,"Einheit":"%","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Anzahl Wiederholeinheiten","Wert":17,"Einheit":"","Kategorie":"Ma\u00dfe und Fl\u00e4chen"},{"Beschreibung":"Fl\u00e4che Anodenbeschichtung gesamt","Wert":593227.4300000001,"Einheit":"mm\u00b2","Kategorie":"Ma\u00dfe und Fl\u00e4chen"},{"Beschreibung":"Fl\u00e4che Kathodenbeschichtung gesamt","Wert":516920.35,"Einheit":"mm\u00b2","Kategorie":"Ma\u00dfe und Fl\u00e4chen"},{"Beschreibung":"Balancing","Wert":0,"Einheit":"%","Kategorie":"Ma\u00dfe und Fl\u00e4chen"},{"Beschreibung":"Gesamtdichte Anodenbeschichtung","Wert":2.22,"Einheit":"g\/cm\u00b3","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gesamtdichte Kathodenbeschichtung","Wert":0.59,"Einheit":"g\/cm\u00b3","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Anodenkollektor","Wert":27.64,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Kathodenkollektor","Wert":5.85,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Anodenbeschichtung","Wert":71.53,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Kathodenbeschichtung","Wert":146.55,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Separator","Wert":126.25,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Elektrolyt","Wert":52.29,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht H\u00fclle","Wert":0,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gesamtgewicht Zelle","Wert":430.11,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Kilopreis Anodenbeschichtung","Wert":7.37,"Einheit":"\u20ac\/kg","Kategorie":"Kosten"},{"Beschreibung":"Kilopreis Kathodenbeschichtung","Wert":22.28,"Einheit":"\u20ac\/kg","Kategorie":"Kosten"},{"Beschreibung":"Preis Anodenbeschichtung","Wert":0.53,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Kathodenbeschichtung","Wert":3.26,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Anodenkollektor","Wert":0.45,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Kathodenkollektor","Wert":0.18,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Separator","Wert":0.53,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Elektrolyt","Wert":0.39,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis H\u00fclle","Wert":0,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Materialkosten einer Zelle","Wert":5.52,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Beschichtete Bahnen Anode Ausnutzung","Wert":3.1052631579,"Einheit":"","Kategorie":"Fl\u00e4chennutzung Elektrode"},{"Beschreibung":"Beschichtete Bahnen Anode","Wert":3,"Einheit":"","Kategorie":"Fl\u00e4chennutzung Elektrode"},{"Beschreibung":"Sheets\/ Meter Anode","Wert":25.0,"Einheit":"Sheet\/m","Kategorie":"Fl\u00e4chennutzung Elektrode"},{"Beschreibung":"Beschichtete Bahnen Kathode Ausnutzung","Wert":3.1466666667,"Einheit":"","Kategorie":"Fl\u00e4chennutzung Elektrode"},{"Beschreibung":"Beschichtete Bahnen Kathode","Wert":3,"Einheit":"","Kategorie":"Fl\u00e4chennutzung Elektrode"},{"Beschreibung":"Sheets\/ Meter Kathode","Wert":26.0869565217,"Einheit":"Sheet\/m","Kategorie":"Fl\u00e4chennutzung Elektrode"}]'
#Zellchemie_raw = '[{"id":1,"Beschreibung":"NCM 622","Kategorie":"Aktivmaterial Kathode","Wert":97.0,"Einheit":"%"},{"id":2,"Beschreibung":"Graphit","Kategorie":"Aktivmaterial Anode","Wert":96.5,"Einheit":"%"},{"id":3,"Beschreibung":"Kupferfolie 10 \u00b5m","Kategorie":"Kollektorfolie Anode","Wert":null,"Einheit":"%"},{"id":4,"Beschreibung":"Aluminiumfolie 8 \u00b5m","Kategorie":"Kollektorfolie Kathode","Wert":null,"Einheit":"%"},{"id":6,"Beschreibung":"Wasser","Kategorie":"L\u00f6semittel Anode","Wert":3.0,"Einheit":"%"},{"id":10,"Beschreibung":"Zellspannung","Kategorie":"Allgemeine Parameter","Wert":3.7,"Einheit":"V"},{"id":11,"Beschreibung":"Irreversibler Formierungsverlust","Kategorie":"Allgemeine Parameter","Wert":10.0,"Einheit":"%"},{"id":12,"Beschreibung":"Zieldichte Beschichtung Kathode","Kategorie":"Elektrodenparameter Kathode","Wert":3.0,"Einheit":"g\/cm\u00b3"},{"id":13,"Beschreibung":"Beschichtungsporosit\u00e4t Kathode","Kategorie":"Elektrodenparameter Kathode","Wert":25.0,"Einheit":"%"},{"id":14,"Beschreibung":"Fl\u00e4chenspezifische Kapazit\u00e4t Kathode","Kategorie":"Elektrodenparameter Kathode","Wert":4.0,"Einheit":"mAh\/cm\u00b2"},{"id":15,"Beschreibung":"Feststoffgehalt Kathode","Kategorie":"Elektrodenparameter Kathode","Wert":60.0,"Einheit":"%"},{"id":16,"Beschreibung":"Zieldichte Beschichtung Anode","Kategorie":"Elektrodenparameter Anode","Wert":1.6,"Einheit":"g\/cm\u00b3"},{"id":17,"Beschreibung":"Beschichtungsporosit\u00e4t Anode","Kategorie":"Elektrodenparameter Anode","Wert":34.0,"Einheit":"%"},{"id":18,"Beschreibung":"Fl\u00e4chenspezifische Kapazit\u00e4t Anode","Kategorie":"Elektrodenparameter Anode","Wert":3.2,"Einheit":"mAh\/cm\u00b2"},{"id":19,"Beschreibung":"Feststoffgehalt Anode","Kategorie":"Elektrodenparameter Anode","Wert":60.0,"Einheit":"%"},{"id":20,"Beschreibung":"Kalkulierter Anoden\u00fcberschuss","Kategorie":"Elektrodenparameter Anode","Wert":10.0,"Einheit":"%"},{"id":21,"Beschreibung":"NMP","Kategorie":"L\u00f6semittel Kathode","Wert":63.4,"Einheit":"%"},{"id":22,"Beschreibung":"ProZell Separator","Kategorie":"Separator","Wert":null,"Einheit":"%"},{"id":23,"Beschreibung":"K-Leitru\u00df 1","Kategorie":"Additive Kathode","Wert":3.0,"Einheit":"%"},{"id":24,"Beschreibung":"K-Leitru\u00df 2","Kategorie":"Additive Kathode","Wert":0.0,"Einheit":"%"},{"id":25,"Beschreibung":"K-Additiv","Kategorie":"Additive Kathode","Wert":1.0,"Einheit":"%"},{"id":26,"Beschreibung":"K-Binder 1","Kategorie":"Additive Kathode","Wert":3.0,"Einheit":"%"},{"id":27,"Beschreibung":"K-Binder 2","Kategorie":"Additive Kathode","Wert":0.0,"Einheit":"%"},{"id":28,"Beschreibung":"A-Leitru\u00df 1","Kategorie":"Additive Anode","Wert":1.0,"Einheit":"%"},{"id":29,"Beschreibung":"A-Leitru\u00df 2","Kategorie":"Additive Anode","Wert":0.0,"Einheit":"%"},{"id":31,"Beschreibung":"A-Binder 1","Kategorie":"Additive Anode","Wert":1.0,"Einheit":"%"},{"id":32,"Beschreibung":"A-Binder 2","Kategorie":"Additive Anode","Wert":1.5,"Einheit":"%"},{"id":33,"Beschreibung":"1M LiPF6 (EC: EMC 3:7 wt%) + 2 wt% VC","Kategorie":"Elektrolyt","Wert":null,"Einheit":"%"}]'
#Prozessroute_raw = '[{"Materialformulierung":["Mischen"]},{"Schichtherstellung":["Beschichten und Trocknen"]},{"Elektrodenkonditionierung":["Kalandrieren"]},{"Elektrodenkonfektionierung":["Längsschneiden"]},{"Zellassemblierung":["Vereinzeln","Stapeln","Kontaktieren","Assemblieren","Pouchbeutel / Gehäuse verschließen"]},{"Elektrolytbefüllung":["Elektrolyt dosieren","Befüllöffnung verschließen"]},{"Formierung":["Formieren","Reifelagern","Prüfen und Klassifizieren"]}]'
#Prozessroute_array_raw = "['Mischen', 'Beschichten und Trocknen', 'Kalandrieren', 'Längsschneiden', 'Vereinzeln', 'Stapeln', 'Kontaktieren', 'Assemblieren', 'Pouchbeutel / Gehäuse verschließen', 'Elektrolyt dosieren', 'Befüllöffnung verschließen', 'Formieren', 'Reifelagern', 'Prüfen und Klassifizieren']"
#Prozessdetails_raw = '[{"Mischen":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0.25,"Einheit":"FA/Anlage","Besonderheit":"Bedienung mit Vereinzelung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Schicht","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme Anode","Wert":20,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Leistungsaufnahme Kathode","Wert":20,"Einheit":"kW","Besonderheit":null},{"id":5,"Beschreibung":"Investition","Wert":1931000,"Einheit":"€/Anlage","Besonderheit":null},{"id":6,"Beschreibung":"Investition einmalig","Wert":640000,"Einheit":"€","Besonderheit":null},{"id":7,"Beschreibung":"Mischzeit Anode","Wert":140,"Einheit":"min","Besonderheit":null},{"id":8,"Beschreibung":"Mischzeit Kathode","Wert":202,"Einheit":"min","Besonderheit":null},{"id":9,"Beschreibung":"Arbeitsvolumen","Wert":1120,"Einheit":"l","Besonderheit":"70% des Nennvolumens"},{"id":10,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"l","Besonderheit":null},{"id":11,"Beschreibung":"variabler Ausschuss","Wert":1,"Einheit":"%","Besonderheit":null},{"id":12,"Beschreibung":"Anlagengrundfläche","Wert":11.4,"Einheit":"m²","Besonderheit":null}]},{"Beschichten und Trocknen":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":1,"Einheit":"FA/Anlage","Besonderheit":"Bedienung mit Stapelanlage"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Anlage","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme Anode","Wert":350,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Leistungsaufnahme Kathode","Wert":510,"Einheit":"kW","Besonderheit":null},{"id":5,"Beschreibung":"Investition","Wert":4800000,"Einheit":"€/Anlage","Besonderheit":null},{"id":6,"Beschreibung":"Beschichtungsgeschwindigkeit Anode","Wert":20,"Einheit":"m/min","Besonderheit":null},{"id":7,"Beschreibung":"Beschichtungsgeschwindigkeit Kathode","Wert":17,"Einheit":"m/min","Besonderheit":null},{"id":8,"Beschreibung":"Arbeitsbreite","Wert":600,"Einheit":"mm","Besonderheit":null},{"id":9,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"m","Besonderheit":null},{"id":10,"Beschreibung":"variabler Ausschuss","Wert":0,"Einheit":"%","Besonderheit":null},{"id":11,"Beschreibung":"Trocknungsdauer Anode","Wert":1.75,"Einheit":"min","Besonderheit":"beeinflusst Trocknerlänge"},{"id":12,"Beschreibung":"Trocknungsdauer Kathode","Wert":2,"Einheit":"min","Besonderheit":"beeinflusst Trocknerlänge"}]},{"Kalandrieren":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0.5,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Schicht","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":10,"Einheit":"kW","Besonderheit":"auslastungsabhängig - 50% Anschlussleistung "},{"id":4,"Beschreibung":"Investition","Wert":1200000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Geschw. Anode","Wert":30,"Einheit":"m/min","Besonderheit":null},{"id":6,"Beschreibung":"Geschw. Kathode","Wert":28,"Einheit":"m/min","Besonderheit":null},{"id":7,"Beschreibung":"Arbeitsbreite","Wert":600,"Einheit":"mm","Besonderheit":null},{"id":8,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"m/d","Besonderheit":null},{"id":9,"Beschreibung":"variabler Ausschuss","Wert":0,"Einheit":"%","Besonderheit":null},{"id":10,"Beschreibung":"Anlagengrundfläche","Wert":24,"Einheit":"m²","Besonderheit":null}]},{"Längsschneiden":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0.5,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":7,"Einheit":"kW","Besonderheit":"auslastungsabhängig-40% Anschlussleistung Verbrauchsmessung"},{"id":4,"Beschreibung":"Investition","Wert":550000,"Einheit":"€/Anlage","Besonderheit":"Lieferantenauskunft 2013"},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":50,"Einheit":"m/min","Besonderheit":null},{"id":6,"Beschreibung":"Arbeitsbreite","Wert":600,"Einheit":"mm","Besonderheit":null},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"m/d","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":16,"Einheit":"m²","Besonderheit":null}]},{"Vereinzeln":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":"Bedienung mit Stapelanlage"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Anlage","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":1,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":36800,"Einheit":"€/Anlage","Besonderheit":"Lieferantenangebot"},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":360,"Einheit":"Blatt/min","Besonderheit":"abgestimmt auf Stapeln"},{"id":6,"Beschreibung":"Fixausschuss","Wert":20,"Einheit":"m/Rolle","Besonderheit":null},{"id":7,"Beschreibung":"variabler Ausschuss","Wert":0.2,"Einheit":"%","Besonderheit":"inkl. Vorgängerprozessschritte"},{"id":8,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":7.2,"Einheit":"m²","Besonderheit":null}]},{"Stapeln":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":1,"Einheit":"FA/Anlage","Besonderheit":"Bedienung mit Vereinzelung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Schicht","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":8,"Einheit":"kW","Besonderheit":"auslastungsabhängig - 40% Anschlussleistung wie wickeln"},{"id":4,"Beschreibung":"Investition","Wert":575500,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":20,"Einheit":"Blatt/s","Besonderheit":"max. 180 Blatt/min"},{"id":6,"Beschreibung":"Zeitverlust Stapelwechsel","Wert":5,"Einheit":"s","Besonderheit":null},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Stk./d","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0.2,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":10,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":10.7,"Einheit":"m²","Besonderheit":null}]},{"Kontaktieren":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0.2,"Einheit":"HiK/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":5,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":950000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":15,"Einheit":"Stk./min","Besonderheit":"Takt: 4 s"},{"id":6,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Stk./d","Besonderheit":null},{"id":7,"Beschreibung":"variabler Ausschuss","Wert":0.1,"Einheit":"%","Besonderheit":null},{"id":8,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":12,"Einheit":"m²","Besonderheit":null}]},{"Assemblieren":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0.2,"Einheit":"HiK/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":5,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":2300000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":15,"Einheit":"Stk./min","Besonderheit":"Takt: 4 s"},{"id":6,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Stk./d","Besonderheit":null},{"id":7,"Beschreibung":"variabler Ausschuss","Wert":0.05,"Einheit":"%","Besonderheit":null},{"id":8,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":6.8,"Einheit":"m²","Besonderheit":null}]},{"Pouchbeutel / Gehäuse verschließen":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0.2,"Einheit":"HiK/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":5,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":650000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":15,"Einheit":"Stk./min","Besonderheit":"Takt: 4 s"},{"id":6,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Stk./d","Besonderheit":null},{"id":7,"Beschreibung":"variabler Ausschuss","Wert":0.1,"Einheit":"%","Besonderheit":null},{"id":8,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":2.3,"Einheit":"m²","Besonderheit":null}]},{"Wickeln":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":1,"Einheit":"FA/Anlage","Besonderheit":null},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Anlage","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":8,"Einheit":"kW","Besonderheit":"auslastungsabhängig-40% Anschlussleistung"},{"id":4,"Beschreibung":"Investition","Wert":1200000,"Einheit":"€/Anlage","Besonderheit":"Lieferantenangebot"},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":18,"Einheit":"m/min","Besonderheit":null},{"id":6,"Beschreibung":"Zeitverlust Wickelwechsel","Wert":5,"Einheit":"s","Besonderheit":null},{"id":7,"Beschreibung":"Fixausschuss","Wert":20,"Einheit":"m/Rolle","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0.6,"Einheit":"%","Besonderheit":"inkl. Vorgängerprozessschritte"},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":10,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":12,"Einheit":"m²","Besonderheit":null}]},{"Elektrolyt dosieren":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0.34,"Einheit":"HiK/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":20,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":2500000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Befülldauer je Zelle","Wert":240,"Einheit":"s","Besonderheit":"für ca. 120 ml in PHEV2"},{"id":6,"Beschreibung":"Parallelbefüllungen","Wert":12,"Einheit":"Stk.","Besonderheit":"Rundtakttisch; Takt: 20 s"},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Stk./d","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":10,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":6,"Einheit":"m²","Besonderheit":null}]},{"Befüllöffnung verschließen":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0.2,"Einheit":"HiK/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":5,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":450000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":20,"Einheit":"Stk./min","Besonderheit":"Takt: 3s"},{"id":6,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Stk./d","Besonderheit":null},{"id":7,"Beschreibung":"variabler Ausschuss","Wert":0.05,"Einheit":"%","Besonderheit":null},{"id":8,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":4,"Einheit":"m²","Besonderheit":null}]},{"Formieren":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":1,"Einheit":"FA/Schicht","Besonderheit":null},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":1,"Einheit":"HiK/Schicht","Besonderheit":null},{"id":3,"Beschreibung":"Formierungsprozedur","Wert":25,"Einheit":"h","Besonderheit":null},{"id":4,"Beschreibung":"Investition Modul","Wert":50000,"Einheit":"€/Modul (40 Ah)","Besonderheit":null},{"id":5,"Beschreibung":"Investition Bediengerät","Wert":500000,"Einheit":"€/Bediengerät","Besonderheit":null},{"id":6,"Beschreibung":"Tagesdurchsatz","Wert":48,"Einheit":"Zellen/Modul","Besonderheit":"für 25h Formierung"},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Zellen/d","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0.5,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":3,"Einheit":"m²","Besonderheit":null},{"id":10,"Beschreibung":"Eta C1","Wert":0.87,"Einheit":"[-]","Besonderheit":"Coulombscher Wirkungsgrad des ersten Ladezyklus"},{"id":11,"Beschreibung":"Eta Z","Wert":0.98,"Einheit":"[-]","Besonderheit":"Wirkungsgrad der Zelle"}]},{"Reifelagern":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":1,"Einheit":"FA/Schicht","Besonderheit":null},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":1,"Einheit":"HiK/Schicht","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":50,"Einheit":"kW","Besonderheit":"bei 100% Auslastung"},{"id":4,"Beschreibung":"Reifelagerdauer","Wert":"7-28","Einheit":"d","Besonderheit":null},{"id":5,"Beschreibung":"Investition Modul","Wert":500,"Einheit":"€/Modul","Besonderheit":"proportional"},{"id":6,"Beschreibung":"Investition Bediengerät","Wert":500000,"Einheit":"€/Bediengerät","Besonderheit":"intervallfix bis 50 Tsd. BZ pro Tag"},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Zellen/d","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":3,"Einheit":"m²","Besonderheit":"intervallfix für 30 Module"}]},{"Prüfen und Klassifizieren":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":null},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":3,"Einheit":"HiK/Anlage","Besonderheit":null},{"id":3,"Beschreibung":"Energie","Wert":5,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":2500000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Prüfdauer","Wert":5,"Einheit":"min/WT","Besonderheit":"mit 50 Zellen/WT"},{"id":6,"Beschreibung":"Durchsatz","Wert":600,"Einheit":"Zellen/h","Besonderheit":null},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Zellen/d","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":5,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":20,"Einheit":"m²","Besonderheit":null}]}]'
#Materialinfos_raw = '[{"NCM 622":[{"id":3,"Beschreibung":"spezifische Kapazität","Wert":160,"Einheit":"mAh/g"},{"id":4,"Beschreibung":"Dichte","Wert":0.476,"Einheit":"g/cm³"},{"id":5,"Beschreibung":"Preis","Wert":25.75,"Einheit":"€/kg"}]},{"Graphit":[{"id":1,"Beschreibung":"spezifische Kapazität","Wert":330,"Einheit":"mAh/g"},{"id":2,"Beschreibung":"Dichte","Wert":2.25,"Einheit":"g/cm³"},{"id":3,"Beschreibung":"Preis","Wert":7.46,"Einheit":"€/kg"}]},{"Kupferfolie 10 µm":[{"id":1,"Beschreibung":"Dicke","Wert":10,"Einheit":"µm"},{"id":2,"Beschreibung":"Dichte","Wert":8.96,"Einheit":"g/cm³"},{"id":3,"Beschreibung":"Breite","Wert":600,"Einheit":"mm"},{"id":4,"Beschreibung":"Preis","Wert":0.44,"Einheit":"€/m"}]},{"Aluminiumfolie 8 µm":[{"id":1,"Beschreibung":"Dicke","Wert":8,"Einheit":"µm"},{"id":2,"Beschreibung":"Dichte","Wert":2.7,"Einheit":"g/cm³"},{"id":3,"Beschreibung":"Breite","Wert":600,"Einheit":"mm"},{"id":4,"Beschreibung":"Preis","Wert":0.2,"Einheit":"€/m"}]},{"Wasser":[{"id":1,"Beschreibung":"Dichte","Wert":1,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":0.01,"Einheit":"€/kg"}]},{"NMP":[{"id":1,"Beschreibung":"Dichte","Wert":1.2,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":2.39,"Einheit":"€/kg"}]},{"ProZell Separator":[{"id":1,"Beschreibung":"Dicke","Wert":20,"Einheit":"µm"},{"id":2,"Beschreibung":"Dichte","Wert":10,"Einheit":"g/cm³"},{"id":3,"Beschreibung":"Porosität","Wert":40,"Einheit":"%"},{"id":4,"Beschreibung":"Breite","Wert":600,"Einheit":"mm"},{"id":5,"Beschreibung":"Preis","Wert":0.5,"Einheit":"€/m"}]},{"K-Leitruß 1":[{"id":1,"Beschreibung":"Dichte","Wert":2.25,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":5.07,"Einheit":"€/kg"}]},{"K-Leitruß 2":[{"id":1,"Beschreibung":"Dichte","Wert":1,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":5.07,"Einheit":"€/kg"}]},{"K-Additiv":[{"id":1,"Beschreibung":"Dichte","Wert":2.25,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":10,"Einheit":"€/kg"}]},{"K-Binder 1":[{"id":1,"Beschreibung":"Dichte","Wert":1.3,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":18,"Einheit":"€/kg"}]},{"K-Binder 2":[{"id":1,"Beschreibung":"Dichte","Wert":1.3,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":18,"Einheit":"€/kg"}]},{"A-Leitruß 1":[{"id":1,"Beschreibung":"Dichte","Wert":2.25,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":5.07,"Einheit":"€/kg"}]},{"A-Leitruß 2":[{"id":1,"Beschreibung":"Dichte","Wert":1,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":5.07,"Einheit":"€/kg"}]},{"A-Binder 1":[{"id":1,"Beschreibung":"Dichte","Wert":1,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":1.5,"Einheit":"€/kg"}]},{"A-Binder 2":[{"id":1,"Beschreibung":"Dichte","Wert":1,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":1.5,"Einheit":"€/kg"}]},{"1M LiPF6 (EC: EMC 3:7 wt%) + 2 wt% VC":[{"id":1,"Beschreibung":"Dichte","Wert":1.3,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":7.44,"Einheit":"€/kg"}]}]'
#Oekonomische_Parameter_raw = '[{"id":1,"Beschreibung":"technische Nutzungsdauer","Wert":8.0,"Einheit":"Jahre","Besonderheit":null},{"id":2,"Beschreibung":"Mindestrentabilit\u00e4t","Wert":8.0,"Einheit":"%","Besonderheit":null},{"id":3,"Beschreibung":"Instandhaltungskostensatz","Wert":1.5,"Einheit":"%","Besonderheit":null},{"id":4,"Beschreibung":"Werkzeugkostensatz","Wert":0.0,"Einheit":"%","Besonderheit":null},{"id":5,"Beschreibung":"Wiederbeschaffungsfaktor","Wert":1.1,"Einheit":"%","Besonderheit":null},{"id":6,"Beschreibung":"Bruttofl\u00e4chenfaktor","Wert":1.8,"Einheit":"%","Besonderheit":null},{"id":7,"Beschreibung":"Bruttovolumenfaktor","Wert":2.5,"Einheit":"%","Besonderheit":null},{"id":8,"Beschreibung":"Personalteuerungssatz","Wert":2.0,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Restwertfaktor","Wert":0.1,"Einheit":null,"Besonderheit":null},{"id":10,"Beschreibung":"Zinssatz Kapitalmarkt","Wert":0.8,"Einheit":"%","Besonderheit":null},{"id":11,"Beschreibung":"Energiekosten","Wert":0.18,"Einheit":"\u20ac\/kWh","Besonderheit":null}]'
#Mitarbeiter_und_Logistik_raw = '[{"id":1,"Beschreibung":"Betriebstage","Wert":360.0,"Einheit":"Betreibstage\/Jahr","Besonderheit":null},{"id":2,"Beschreibung":"Mitarbeiterarbeitstage","Wert":210.0,"Einheit":"Arbeitstage\/Mitarbeiter","Besonderheit":null},{"id":3,"Beschreibung":"Arbeitszeit pro Schicht","Wert":8.0,"Einheit":"Stunden\/Schicht","Besonderheit":null},{"id":4,"Beschreibung":"Schichten pro Tag","Wert":3.0,"Einheit":"Schichten\/Tag","Besonderheit":null},{"id":5,"Beschreibung":"F\u00fchrunggspanne","Wert":10.0,"Einheit":"1\/X","Besonderheit":null},{"id":6,"Beschreibung":"Stundensatz HiK","Wert":31.81,"Einheit":"\u20ac\/h","Besonderheit":null},{"id":7,"Beschreibung":"Stundensatz FA","Wert":39.77,"Einheit":"\u20ac\/h","Besonderheit":null},{"id":8,"Beschreibung":"Stundensatz Indirekte","Wert":51.5,"Einheit":"\u20ac\/h","Besonderheit":null}]'
#Gebaeude_raw = '[{"id":1,"Beschreibung":"Fl\u00e4chenkosten Produktionshalle","Wert":45.0,"Einheit":"\u20ac\/m\u00b2","Besonderheit":null},{"id":2,"Beschreibung":"Fl\u00e4chenkosten Trockenraum","Wert":60.0,"Einheit":"\u20ac\/m\u00b2","Besonderheit":null},{"id":3,"Beschreibung":"Baukosten","Wert":900.0,"Einheit":"\u20ac\/m\u00b2","Besonderheit":null},{"id":4,"Beschreibung":"Nutzungsdauer","Wert":50.0,"Einheit":"Jahre","Besonderheit":null},{"id":6,"Beschreibung":"Personal Trockenraum","Wert":1.0,"Einheit":"FA\/Schicht","Besonderheit":null},{"id":7,"Beschreibung":"Energie Trockenraum fl\u00e4chennormiert","Wert":6.8,"Einheit":"kWh\/(m\u00b2)","Besonderheit":null},{"id":8,"Beschreibung":"Energie Trockenraum volumennormiert","Wert":1.7,"Einheit":"kWh\/(m\u00b2)","Besonderheit":null},{"id":9,"Beschreibung":"Investition","Wert":4975.0,"Einheit":"\u20ac\/m\u00b2","Besonderheit":null},{"id":10,"Beschreibung":"technische Nutzungsdauer","Wert":15.0,"Einheit":"Jahre","Besonderheit":null},{"id":12,"Beschreibung":"Unbebaute Fl\u00e4chen","Wert":1.0,"Einheit":"%","Besonderheit":"von Grundst\u00e4cksfl\u00e4che zur bebauten Fl\u00e4che (Bruttogrundfl\u00e4che)"},{"id":13,"Beschreibung":"Ungenutzte Fl\u00e4chen","Wert":2.0,"Einheit":"%","Besonderheit":"von Brutto- zu Nettofl\u00e4che"},{"id":14,"Beschreibung":"Nebenfl\u00e4chen","Wert":25.0,"Einheit":"%","Besonderheit":"Neben- Funktions-  und Sozialfl\u00e4chen"},{"id":15,"Beschreibung":"Verwaltungsfl\u00e4chen","Wert":15.0,"Einheit":"%","Besonderheit":null},{"id":16,"Beschreibung":"Lagerfl\u00e4chen","Wert":30.0,"Einheit":"%","Besonderheit":"Lager- und Versandfl\u00e4chen"},{"id":17,"Beschreibung":"Zwischenlagerfl\u00e4chen","Wert":20.0,"Einheit":"%","Besonderheit":"Zwischenlager in der Produktionshalle"}]'

def Kostenberechnung(Zellergebnisse_raw,
                     Zellchemie_raw,
                     Prozessroute_array_raw,
                     Prozessdetails_raw,
                     Materialinfos_raw,
                     Oekonomische_Parameter_raw,
                     Mitarbeiter_und_Logistik_raw,
                     Gebaeude_raw):
    #print(Prozessroute_array_raw)
    #____________________________________
    #Eingangsparameter in roher Form
    # Zellergebnisse_raw = '[{"Beschreibung":"Ladung","Wert":20.68,"Einheit":"Ah","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Zellformat","Wert":"BLB 2 Pouch","Einheit":"","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Zelltyp","Wert":"Pouchzelle","Einheit":"","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Nennspannung","Wert":3.7,"Einheit":"V","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Energiedichte","Wert":177.87,"Einheit":"WH\/kg","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Zellen pro Jahr","Wert":65355878.3999999985,"Einheit":"","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Gesamtgewicht Zelle","Wert":430.11,"Einheit":"g","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Balancing","Wert":13.29,"Einheit":"%","Kategorie":"\u00dcbersicht"},{"Beschreibung":"Anzahl Wiederholeinheiten","Wert":17,"Einheit":"","Kategorie":"Ma\u00dfe und Fl\u00e4chen"},{"Beschreibung":"Fl\u00e4che Anodenbeschichtung gesamt","Wert":593227.4300000001,"Einheit":"mm\u00b2","Kategorie":"Ma\u00dfe und Fl\u00e4chen"},{"Beschreibung":"Fl\u00e4che Kathodenbeschichtung gesamt","Wert":516920.35,"Einheit":"mm\u00b2","Kategorie":"Ma\u00dfe und Fl\u00e4chen"},{"Beschreibung":"Balancing","Wert":0,"Einheit":"%","Kategorie":"Ma\u00dfe und Fl\u00e4chen"},{"Beschreibung":"Gesamtdichte Anodenbeschichtung","Wert":2.22,"Einheit":"g\/cm\u00b3","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gesamtdichte Kathodenbeschichtung","Wert":0.59,"Einheit":"g\/cm\u00b3","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Anodenkollektor","Wert":27.64,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Kathodenkollektor","Wert":5.85,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Anodenbeschichtung","Wert":71.53,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Kathodenbeschichtung","Wert":146.55,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Separator","Wert":126.25,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht Elektrolyt","Wert":52.29,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gewicht H\u00fclle","Wert":0,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Gesamtgewicht Zelle","Wert":430.11,"Einheit":"g","Kategorie":"Gewichte und Dichten"},{"Beschreibung":"Kilopreis Anodenbeschichtung","Wert":7.37,"Einheit":"\u20ac\/kg","Kategorie":"Kosten"},{"Beschreibung":"Kilopreis Kathodenbeschichtung","Wert":22.28,"Einheit":"\u20ac\/kg","Kategorie":"Kosten"},{"Beschreibung":"Preis Anodenbeschichtung","Wert":0.53,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Kathodenbeschichtung","Wert":3.26,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Anodenkollektor","Wert":0.45,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Kathodenkollektor","Wert":0.18,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Separator","Wert":0.53,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis Elektrolyt","Wert":0.39,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Preis H\u00fclle","Wert":0,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Materialkosten einer Zelle","Wert":5.52,"Einheit":"\u20ac","Kategorie":"Kosten"},{"Beschreibung":"Beschichtete Bahnen Anode Ausnutzung","Wert":3.1052631579,"Einheit":"","Kategorie":"Fl\u00e4chennutzung Elektrode"},{"Beschreibung":"Beschichtete Bahnen Anode","Wert":3,"Einheit":"","Kategorie":"Fl\u00e4chennutzung Elektrode"},{"Beschreibung":"Sheets\/ Meter Anode","Wert":25.0,"Einheit":"Sheet\/m","Kategorie":"Fl\u00e4chennutzung Elektrode"},{"Beschreibung":"Beschichtete Bahnen Kathode Ausnutzung","Wert":3.1466666667,"Einheit":"","Kategorie":"Fl\u00e4chennutzung Elektrode"},{"Beschreibung":"Beschichtete Bahnen Kathode","Wert":3,"Einheit":"","Kategorie":"Fl\u00e4chennutzung Elektrode"},{"Beschreibung":"Sheets\/ Meter Kathode","Wert":26.0869565217,"Einheit":"Sheet\/m","Kategorie":"Fl\u00e4chennutzung Elektrode"}]'
    # Zellchemie_raw = '[{"id":1,"Beschreibung":"NCM 622","Kategorie":"Aktivmaterial Kathode","Wert":97.0,"Einheit":"%"},{"id":2,"Beschreibung":"Graphit","Kategorie":"Aktivmaterial Anode","Wert":96.5,"Einheit":"%"},{"id":3,"Beschreibung":"Kupferfolie 10 \u00b5m","Kategorie":"Kollektorfolie Anode","Wert":null,"Einheit":"%"},{"id":4,"Beschreibung":"Aluminiumfolie 8 \u00b5m","Kategorie":"Kollektorfolie Kathode","Wert":null,"Einheit":"%"},{"id":6,"Beschreibung":"Wasser","Kategorie":"L\u00f6semittel Anode","Wert":3.0,"Einheit":"%"},{"id":10,"Beschreibung":"Zellspannung","Kategorie":"Allgemeine Parameter","Wert":3.7,"Einheit":"V"},{"id":11,"Beschreibung":"Irreversibler Formierungsverlust","Kategorie":"Allgemeine Parameter","Wert":10.0,"Einheit":"%"},{"id":12,"Beschreibung":"Zieldichte Beschichtung Kathode","Kategorie":"Elektrodenparameter Kathode","Wert":3.0,"Einheit":"g\/cm\u00b3"},{"id":13,"Beschreibung":"Beschichtungsporosit\u00e4t Kathode","Kategorie":"Elektrodenparameter Kathode","Wert":25.0,"Einheit":"%"},{"id":14,"Beschreibung":"Fl\u00e4chenspezifische Kapazit\u00e4t Kathode","Kategorie":"Elektrodenparameter Kathode","Wert":4.0,"Einheit":"mAh\/cm\u00b2"},{"id":15,"Beschreibung":"Feststoffgehalt Kathode","Kategorie":"Elektrodenparameter Kathode","Wert":60.0,"Einheit":"%"},{"id":16,"Beschreibung":"Zieldichte Beschichtung Anode","Kategorie":"Elektrodenparameter Anode","Wert":1.6,"Einheit":"g\/cm\u00b3"},{"id":17,"Beschreibung":"Beschichtungsporosit\u00e4t Anode","Kategorie":"Elektrodenparameter Anode","Wert":34.0,"Einheit":"%"},{"id":18,"Beschreibung":"Fl\u00e4chenspezifische Kapazit\u00e4t Anode","Kategorie":"Elektrodenparameter Anode","Wert":3.2,"Einheit":"mAh\/cm\u00b2"},{"id":19,"Beschreibung":"Feststoffgehalt Anode","Kategorie":"Elektrodenparameter Anode","Wert":60.0,"Einheit":"%"},{"id":20,"Beschreibung":"Kalkulierter Anoden\u00fcberschuss","Kategorie":"Elektrodenparameter Anode","Wert":10.0,"Einheit":"%"},{"id":21,"Beschreibung":"NMP","Kategorie":"L\u00f6semittel Kathode","Wert":63.4,"Einheit":"%"},{"id":22,"Beschreibung":"ProZell Separator","Kategorie":"Separator","Wert":null,"Einheit":"%"},{"id":23,"Beschreibung":"K-Leitru\u00df 1","Kategorie":"Additive Kathode","Wert":3.0,"Einheit":"%"},{"id":24,"Beschreibung":"K-Leitru\u00df 2","Kategorie":"Additive Kathode","Wert":0.0,"Einheit":"%"},{"id":25,"Beschreibung":"K-Additiv","Kategorie":"Additive Kathode","Wert":1.0,"Einheit":"%"},{"id":26,"Beschreibung":"K-Binder 1","Kategorie":"Additive Kathode","Wert":3.0,"Einheit":"%"},{"id":27,"Beschreibung":"K-Binder 2","Kategorie":"Additive Kathode","Wert":0.0,"Einheit":"%"},{"id":28,"Beschreibung":"A-Leitru\u00df 1","Kategorie":"Additive Anode","Wert":1.0,"Einheit":"%"},{"id":29,"Beschreibung":"A-Leitru\u00df 2","Kategorie":"Additive Anode","Wert":0.0,"Einheit":"%"},{"id":31,"Beschreibung":"A-Binder 1","Kategorie":"Additive Anode","Wert":1.0,"Einheit":"%"},{"id":32,"Beschreibung":"A-Binder 2","Kategorie":"Additive Anode","Wert":1.5,"Einheit":"%"},{"id":33,"Beschreibung":"1M LiPF6 (EC: EMC 3:7 wt%) + 2 wt% VC","Kategorie":"Elektrolyt","Wert":null,"Einheit":"%"}]'
    # Prozessroute_raw = '[{"Materialformulierung":["Mischen"]},{"Schichtherstellung":["Beschichten und Trocknen"]},{"Elektrodenkonditionierung":["Kalandrieren"]},{"Elektrodenkonfektionierung":["Längsschneiden"]},{"Zellassemblierung":["Vereinzeln","Stapeln","Kontaktieren","Assemblieren","Pouchbeutel / Gehäuse verschließen"]},{"Elektrolytbefüllung":["Elektrolyt dosieren","Befüllöffnung verschließen"]},{"Formierung":["Formieren","Reifelagern","Prüfen und Klassifizieren"]}]'
    # Prozessroute_array_raw = "['Mischen', 'Beschichten und Trocknen', 'Kalandrieren', 'Längsschneiden', 'Vereinzeln', 'Stapeln', 'Kontaktieren', 'Assemblieren', 'Pouchbeutel / Gehäuse verschließen', 'Elektrolyt dosieren', 'Befüllöffnung verschließen', 'Formieren', 'Reifelagern', 'Prüfen und Klassifizieren']"
    # Prozessdetails_raw = '[{"Mischen":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0.25,"Einheit":"FA/Anlage","Besonderheit":"Bedienung mit Vereinzelung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Schicht","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme Anode","Wert":20,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Leistungsaufnahme Kathode","Wert":20,"Einheit":"kW","Besonderheit":null},{"id":5,"Beschreibung":"Investition","Wert":1931000,"Einheit":"€/Anlage","Besonderheit":null},{"id":6,"Beschreibung":"Investition einmalig","Wert":640000,"Einheit":"€","Besonderheit":null},{"id":7,"Beschreibung":"Mischzeit Anode","Wert":140,"Einheit":"min","Besonderheit":null},{"id":8,"Beschreibung":"Mischzeit Kathode","Wert":202,"Einheit":"min","Besonderheit":null},{"id":9,"Beschreibung":"Arbeitsvolumen","Wert":1120,"Einheit":"l","Besonderheit":"70% des Nennvolumens"},{"id":10,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"l","Besonderheit":null},{"id":11,"Beschreibung":"variabler Ausschuss","Wert":1,"Einheit":"%","Besonderheit":null},{"id":12,"Beschreibung":"Anlagengrundfläche","Wert":11.4,"Einheit":"m²","Besonderheit":null}]},{"MultiEx Mischen":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0.25,"Einheit":"FA/Anlage","Besonderheit":"Bedienung mit Vereinzelung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Schicht","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme Anode","Wert":14,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Leistungsaufnahme Kathode","Wert":19,"Einheit":"kW","Besonderheit":null},{"id":5,"Beschreibung":"Investition","Wert":1931000,"Einheit":"€/Anlage","Besonderheit":null},{"id":6,"Beschreibung":"Geschwindigkeit","Wert":100,"Einheit":"l/h","Besonderheit":null},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"l","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":11.4,"Einheit":"m²","Besonderheit":null}]},{"Beschichten und Trocknen":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":1,"Einheit":"FA/Anlage","Besonderheit":"Bedienung mit Stapelanlage"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Anlage","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme Anode","Wert":350,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Leistungsaufnahme Kathode","Wert":510,"Einheit":"kW","Besonderheit":null},{"id":5,"Beschreibung":"Investition","Wert":4800000,"Einheit":"€/Anlage","Besonderheit":null},{"id":6,"Beschreibung":"Beschichtungsgeschwindigkeit Anode","Wert":20,"Einheit":"m/min","Besonderheit":null},{"id":7,"Beschreibung":"Beschichtungsgeschwindigkeit Kathode","Wert":17,"Einheit":"m/min","Besonderheit":null},{"id":8,"Beschreibung":"Arbeitsbreite","Wert":600,"Einheit":"mm","Besonderheit":null},{"id":9,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"m","Besonderheit":null},{"id":10,"Beschreibung":"variabler Ausschuss","Wert":0,"Einheit":"%","Besonderheit":null},{"id":11,"Beschreibung":"Trocknungsdauer Anode","Wert":1.75,"Einheit":"min","Besonderheit":"beeinflusst Trocknerlänge"},{"id":12,"Beschreibung":"Trocknungsdauer Kathode","Wert":2,"Einheit":"min","Besonderheit":"beeinflusst Trocknerlänge"}]},{"Kalandrieren":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0.5,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Schicht","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":10,"Einheit":"kW","Besonderheit":"auslastungsabhängig - 50% Anschlussleistung "},{"id":4,"Beschreibung":"Investition","Wert":1200000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Geschw. Anode","Wert":30,"Einheit":"m/min","Besonderheit":null},{"id":6,"Beschreibung":"Geschw. Kathode","Wert":28,"Einheit":"m/min","Besonderheit":null},{"id":7,"Beschreibung":"Arbeitsbreite","Wert":600,"Einheit":"mm","Besonderheit":null},{"id":8,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"m/d","Besonderheit":null},{"id":9,"Beschreibung":"variabler Ausschuss","Wert":0,"Einheit":"%","Besonderheit":null},{"id":10,"Beschreibung":"Anlagengrundfläche","Wert":24,"Einheit":"m²","Besonderheit":null}]},{"Längsschneiden":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0.5,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":7,"Einheit":"kW","Besonderheit":"auslastungsabhängig-40% Anschlussleistung Verbrauchsmessung"},{"id":4,"Beschreibung":"Investition","Wert":550000,"Einheit":"€/Anlage","Besonderheit":"Lieferantenauskunft 2013"},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":50,"Einheit":"m/min","Besonderheit":null},{"id":6,"Beschreibung":"Arbeitsbreite","Wert":600,"Einheit":"mm","Besonderheit":null},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"m/d","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":16,"Einheit":"m²","Besonderheit":null}]},{"Vereinzeln":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":"Bedienung mit Stapelanlage"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Anlage","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":1,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":36800,"Einheit":"€/Anlage","Besonderheit":"Lieferantenangebot"},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":360,"Einheit":"Blatt/min","Besonderheit":"abgestimmt auf Stapeln"},{"id":6,"Beschreibung":"Fixausschuss","Wert":20,"Einheit":"m/Rolle","Besonderheit":null},{"id":7,"Beschreibung":"variabler Ausschuss","Wert":0.2,"Einheit":"%","Besonderheit":"inkl. Vorgängerprozessschritte"},{"id":8,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":7.2,"Einheit":"m²","Besonderheit":null}]},{"Stapeln":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":1,"Einheit":"FA/Anlage","Besonderheit":"Bedienung mit Vereinzelung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Schicht","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":8,"Einheit":"kW","Besonderheit":"auslastungsabhängig - 40% Anschlussleistung wie wickeln"},{"id":4,"Beschreibung":"Investition","Wert":575500,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":20,"Einheit":"Blatt/s","Besonderheit":"max. 180 Blatt/min"},{"id":6,"Beschreibung":"Zeitverlust Stapelwechsel","Wert":5,"Einheit":"s","Besonderheit":null},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Stk./d","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0.2,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":10,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":10.7,"Einheit":"m²","Besonderheit":null}]},{"Kontaktieren":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0.2,"Einheit":"HiK/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":5,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":950000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":15,"Einheit":"Stk./min","Besonderheit":"Takt: 4 s"},{"id":6,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Stk./d","Besonderheit":null},{"id":7,"Beschreibung":"variabler Ausschuss","Wert":0.1,"Einheit":"%","Besonderheit":null},{"id":8,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":12,"Einheit":"m²","Besonderheit":null}]},{"Assemblieren":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0.2,"Einheit":"HiK/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":5,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":2300000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":15,"Einheit":"Stk./min","Besonderheit":"Takt: 4 s"},{"id":6,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Stk./d","Besonderheit":null},{"id":7,"Beschreibung":"variabler Ausschuss","Wert":0.05,"Einheit":"%","Besonderheit":null},{"id":8,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":6.8,"Einheit":"m²","Besonderheit":null}]},{"Pouchbeutel / Gehäuse verschließen":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0.2,"Einheit":"HiK/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":5,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":650000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":15,"Einheit":"Stk./min","Besonderheit":"Takt: 4 s"},{"id":6,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Stk./d","Besonderheit":null},{"id":7,"Beschreibung":"variabler Ausschuss","Wert":0.1,"Einheit":"%","Besonderheit":null},{"id":8,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":2.3,"Einheit":"m²","Besonderheit":null}]},{"Wickeln":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":1,"Einheit":"FA/Anlage","Besonderheit":null},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0,"Einheit":"HiK/Anlage","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":8,"Einheit":"kW","Besonderheit":"auslastungsabhängig-40% Anschlussleistung"},{"id":4,"Beschreibung":"Investition","Wert":1200000,"Einheit":"€/Anlage","Besonderheit":"Lieferantenangebot"},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":18,"Einheit":"m/min","Besonderheit":null},{"id":6,"Beschreibung":"Zeitverlust Wickelwechsel","Wert":5,"Einheit":"s","Besonderheit":null},{"id":7,"Beschreibung":"Fixausschuss","Wert":20,"Einheit":"m/Rolle","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0.6,"Einheit":"%","Besonderheit":"inkl. Vorgängerprozessschritte"},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":10,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":12,"Einheit":"m²","Besonderheit":null}]},{"Elektrolyt dosieren":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0.34,"Einheit":"HiK/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":20,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":2500000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Befülldauer je Zelle","Wert":240,"Einheit":"s","Besonderheit":"für ca. 120 ml in PHEV2"},{"id":6,"Beschreibung":"Parallelbefüllungen","Wert":12,"Einheit":"Stk.","Besonderheit":"Rundtakttisch; Takt: 20 s"},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Stk./d","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":10,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":6,"Einheit":"m²","Besonderheit":null}]},{"Befüllöffnung verschließen":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":0.2,"Einheit":"HiK/Anlage","Besonderheit":"Mehranlagenbedienung"},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":5,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":450000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Geschwindigkeit","Wert":20,"Einheit":"Stk./min","Besonderheit":"Takt: 3s"},{"id":6,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Stk./d","Besonderheit":null},{"id":7,"Beschreibung":"variabler Ausschuss","Wert":0.05,"Einheit":"%","Besonderheit":null},{"id":8,"Beschreibung":"Anlagengrundfläche","Wert":0,"Einheit":"m²","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche Trockenraum","Wert":4,"Einheit":"m²","Besonderheit":null}]},{"Formieren":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":1,"Einheit":"FA/Schicht","Besonderheit":null},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":1,"Einheit":"HiK/Schicht","Besonderheit":null},{"id":3,"Beschreibung":"Formierungsprozedur","Wert":25,"Einheit":"h","Besonderheit":null},{"id":4,"Beschreibung":"Investition Modul","Wert":50000,"Einheit":"€/Modul (40 Ah)","Besonderheit":null},{"id":5,"Beschreibung":"Investition Bediengerät","Wert":500000,"Einheit":"€/Bediengerät","Besonderheit":null},{"id":6,"Beschreibung":"Tagesdurchsatz","Wert":48,"Einheit":"Zellen/Modul","Besonderheit":"für 25h Formierung"},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Zellen/d","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0.5,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":3,"Einheit":"m²","Besonderheit":null},{"id":10,"Beschreibung":"Eta C1","Wert":0.87,"Einheit":"[-]","Besonderheit":"Coulombscher Wirkungsgrad des ersten Ladezyklus"},{"id":11,"Beschreibung":"Eta Z","Wert":0.98,"Einheit":"[-]","Besonderheit":"Wirkungsgrad der Zelle"}]},{"Reifelagern":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":1,"Einheit":"FA/Schicht","Besonderheit":null},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":1,"Einheit":"HiK/Schicht","Besonderheit":null},{"id":3,"Beschreibung":"Leistungsaufnahme","Wert":50,"Einheit":"kW","Besonderheit":"bei 100% Auslastung"},{"id":4,"Beschreibung":"Reifelagerdauer","Wert":"7-28","Einheit":"d","Besonderheit":null},{"id":5,"Beschreibung":"Investition Modul","Wert":500,"Einheit":"€/Modul","Besonderheit":"proportional"},{"id":6,"Beschreibung":"Investition Bediengerät","Wert":500000,"Einheit":"€/Bediengerät","Besonderheit":"intervallfix bis 50 Tsd. BZ pro Tag"},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Zellen/d","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":0,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":3,"Einheit":"m²","Besonderheit":"intervallfix für 30 Module"}]},{"Prüfen und Klassifizieren":[{"id":1,"Beschreibung":"Personal Facharbeiter","Wert":0,"Einheit":"FA/Anlage","Besonderheit":null},{"id":2,"Beschreibung":"Personal Hilfskräfte","Wert":3,"Einheit":"HiK/Anlage","Besonderheit":null},{"id":3,"Beschreibung":"Energie","Wert":5,"Einheit":"kW","Besonderheit":null},{"id":4,"Beschreibung":"Investition","Wert":2500000,"Einheit":"€/Anlage","Besonderheit":null},{"id":5,"Beschreibung":"Prüfdauer","Wert":5,"Einheit":"min/WT","Besonderheit":"mit 50 Zellen/WT"},{"id":6,"Beschreibung":"Durchsatz","Wert":600,"Einheit":"Zellen/h","Besonderheit":null},{"id":7,"Beschreibung":"Fixausschuss","Wert":0,"Einheit":"Zellen/d","Besonderheit":null},{"id":8,"Beschreibung":"variabler Ausschuss","Wert":5,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Anlagengrundfläche","Wert":20,"Einheit":"m²","Besonderheit":null}]}]'
    # Materialinfos_raw = '[{"NCM 622":[{"id":3,"Beschreibung":"spezifische Kapazität","Wert":160,"Einheit":"mAh/g"},{"id":4,"Beschreibung":"Dichte","Wert":0.476,"Einheit":"g/cm³"},{"id":5,"Beschreibung":"Preis","Wert":25.75,"Einheit":"€/kg"}]},{"Graphit":[{"id":1,"Beschreibung":"spezifische Kapazität","Wert":330,"Einheit":"mAh/g"},{"id":2,"Beschreibung":"Dichte","Wert":2.25,"Einheit":"g/cm³"},{"id":3,"Beschreibung":"Preis","Wert":7.46,"Einheit":"€/kg"}]},{"Kupferfolie 10 µm":[{"id":1,"Beschreibung":"Dicke","Wert":10,"Einheit":"µm"},{"id":2,"Beschreibung":"Dichte","Wert":8.96,"Einheit":"g/cm³"},{"id":3,"Beschreibung":"Breite","Wert":600,"Einheit":"mm"},{"id":4,"Beschreibung":"Preis","Wert":0.44,"Einheit":"€/m"},{"id":5,"Beschreibung":"Rollenlänge","Wert":2000,"Einheit":"m"}]},{"Aluminiumfolie 8 µm":[{"id":1,"Beschreibung":"Dicke","Wert":8,"Einheit":"µm"},{"id":2,"Beschreibung":"Dichte","Wert":2.7,"Einheit":"g/cm³"},{"id":3,"Beschreibung":"Breite","Wert":600,"Einheit":"mm"},{"id":4,"Beschreibung":"Preis","Wert":0.2,"Einheit":"€/m"},{"id":5,"Beschreibung":"Rollenlänge","Wert":2000,"Einheit":"m"}]},{"Wasser":[{"id":1,"Beschreibung":"Dichte","Wert":1,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":0.01,"Einheit":"€/kg"}]},{"NMP":[{"id":1,"Beschreibung":"Dichte","Wert":1.2,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":2.39,"Einheit":"€/kg"}]},{"ProZell Separator":[{"id":1,"Beschreibung":"Dicke","Wert":20,"Einheit":"µm"},{"id":2,"Beschreibung":"Dichte","Wert":10,"Einheit":"g/cm³"},{"id":3,"Beschreibung":"Porosität","Wert":40,"Einheit":"%"},{"id":4,"Beschreibung":"Breite","Wert":600,"Einheit":"mm"},{"id":5,"Beschreibung":"Preis","Wert":0.5,"Einheit":"€/m"},{"id":6,"Beschreibung":"Rollenlänge","Wert":2000,"Einheit":"m"}]},{"K-Leitruß 1":[{"id":1,"Beschreibung":"Dichte","Wert":2.25,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":5.07,"Einheit":"€/kg"}]},{"K-Leitruß 2":[{"id":1,"Beschreibung":"Dichte","Wert":1,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":5.07,"Einheit":"€/kg"}]},{"K-Additiv":[{"id":1,"Beschreibung":"Dichte","Wert":2.25,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":10,"Einheit":"€/kg"}]},{"K-Binder 1":[{"id":1,"Beschreibung":"Dichte","Wert":1.3,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":18,"Einheit":"€/kg"}]},{"K-Binder 2":[{"id":1,"Beschreibung":"Dichte","Wert":1.3,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":18,"Einheit":"€/kg"}]},{"A-Leitruß 1":[{"id":1,"Beschreibung":"Dichte","Wert":2.25,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":5.07,"Einheit":"€/kg"}]},{"A-Leitruß 2":[{"id":1,"Beschreibung":"Dichte","Wert":1,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":5.07,"Einheit":"€/kg"}]},{"A-Binder 1":[{"id":1,"Beschreibung":"Dichte","Wert":1,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":1.5,"Einheit":"€/kg"}]},{"A-Binder 2":[{"id":1,"Beschreibung":"Dichte","Wert":1,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":1.5,"Einheit":"€/kg"}]},{"1M LiPF6 (EC: EMC 3:7 wt%) + 2 wt% VC":[{"id":1,"Beschreibung":"Dichte","Wert":1.3,"Einheit":"g/cm³"},{"id":2,"Beschreibung":"Preis","Wert":7.44,"Einheit":"€/kg"}]}]'
    # Oekonomische_Parameter_raw = '[{"id":1,"Beschreibung":"technische Nutzungsdauer","Wert":8.0,"Einheit":"Jahre","Besonderheit":null},{"id":2,"Beschreibung":"Mindestrentabilit\u00e4t","Wert":8.0,"Einheit":"%","Besonderheit":null},{"id":3,"Beschreibung":"Instandhaltungskostensatz","Wert":1.5,"Einheit":"%","Besonderheit":null},{"id":4,"Beschreibung":"Werkzeugkostensatz","Wert":0.0,"Einheit":"%","Besonderheit":null},{"id":5,"Beschreibung":"Wiederbeschaffungsfaktor","Wert":1.1,"Einheit":"%","Besonderheit":null},{"id":6,"Beschreibung":"Bruttofl\u00e4chenfaktor","Wert":1.8,"Einheit":"%","Besonderheit":null},{"id":7,"Beschreibung":"Bruttovolumenfaktor","Wert":2.5,"Einheit":"%","Besonderheit":null},{"id":8,"Beschreibung":"Personalteuerungssatz","Wert":2.0,"Einheit":"%","Besonderheit":null},{"id":9,"Beschreibung":"Restwertfaktor","Wert":0.1,"Einheit":null,"Besonderheit":null},{"id":10,"Beschreibung":"Zinssatz Kapitalmarkt","Wert":0.8,"Einheit":"%","Besonderheit":null},{"id":11,"Beschreibung":"Energiekosten","Wert":0.18,"Einheit":"\u20ac\/kWh","Besonderheit":null}]'
    # Mitarbeiter_und_Logistik_raw = '[{"id":1,"Beschreibung":"Betriebstage","Wert":360.0,"Einheit":"Betreibstage\/Jahr","Besonderheit":null},{"id":2,"Beschreibung":"Mitarbeiterarbeitstage","Wert":210.0,"Einheit":"Arbeitstage\/Mitarbeiter","Besonderheit":null},{"id":3,"Beschreibung":"Arbeitszeit pro Schicht","Wert":8.0,"Einheit":"Stunden\/Schicht","Besonderheit":null},{"id":4,"Beschreibung":"Schichten pro Tag","Wert":3.0,"Einheit":"Schichten\/Tag","Besonderheit":null},{"id":5,"Beschreibung":"F\u00fchrunggspanne","Wert":10.0,"Einheit":"1\/X","Besonderheit":null},{"id":6,"Beschreibung":"Stundensatz Hilfskraft","Wert":31.81,"Einheit":"\u20ac\/h","Besonderheit":null},{"id":7,"Beschreibung":"Stundensatz Facharbeiter","Wert":39.77,"Einheit":"\u20ac\/h","Besonderheit":null},{"id":8,"Beschreibung":"Stundensatz Indirekte","Wert":51.5,"Einheit":"\u20ac\/h","Besonderheit":null}]'
    # Gebaeude_raw = '[{"id":1,"Beschreibung":"Fl\u00e4chenkosten Produktionshalle","Wert":45.0,"Einheit":"\u20ac\/m\u00b2","Besonderheit":null},{"id":2,"Beschreibung":"Fl\u00e4chenkosten Trockenraum","Wert":60.0,"Einheit":"\u20ac\/m\u00b2","Besonderheit":null},{"id":3,"Beschreibung":"Baukosten","Wert":900.0,"Einheit":"\u20ac\/m\u00b2","Besonderheit":null},{"id":4,"Beschreibung":"Nutzungsdauer","Wert":50.0,"Einheit":"Jahre","Besonderheit":null},{"id":6,"Beschreibung":"Personal Trockenraum","Wert":1.0,"Einheit":"FA\/Schicht","Besonderheit":null},{"id":7,"Beschreibung":"Energie Trockenraum fl\u00e4chennormiert","Wert":6.8,"Einheit":"kWh\/(m\u00b2)","Besonderheit":null},{"id":8,"Beschreibung":"Energie Trockenraum volumennormiert","Wert":1.7,"Einheit":"kWh\/(m\u00b2)","Besonderheit":null},{"id":9,"Beschreibung":"Investition","Wert":4975.0,"Einheit":"\u20ac\/m\u00b2","Besonderheit":null},{"id":10,"Beschreibung":"technische Nutzungsdauer","Wert":15.0,"Einheit":"Jahre","Besonderheit":null},{"id":12,"Beschreibung":"Unbebaute Fl\u00e4chen","Wert":1.0,"Einheit":"%","Besonderheit":"von Grundst\u00e4cksfl\u00e4che zur bebauten Fl\u00e4che (Bruttogrundfl\u00e4che)"},{"id":13,"Beschreibung":"Ungenutzte Fl\u00e4chen","Wert":2.0,"Einheit":"%","Besonderheit":"von Brutto- zu Nettofl\u00e4che"},{"id":14,"Beschreibung":"Nebenfl\u00e4chen","Wert":25.0,"Einheit":"%","Besonderheit":"Neben- Funktions-  und Sozialfl\u00e4chen"},{"id":15,"Beschreibung":"Verwaltungsfl\u00e4chen","Wert":15.0,"Einheit":"%","Besonderheit":null},{"id":16,"Beschreibung":"Lagerfl\u00e4chen","Wert":30.0,"Einheit":"%","Besonderheit":"Lager- und Versandfl\u00e4chen"},{"id":17,"Beschreibung":"Zwischenlagerfl\u00e4chen","Wert":20.0,"Einheit":"%","Besonderheit":"Zwischenlager in der Produktionshalle"}]'

    print(Prozessroute_array_raw)
    #____________________________________
    #Allgemeine Funktionen
    
    #Sucht das DF zu einem Prozessschritt raus
    def read_prozessInfo(Prozess):
        df = Prozessdetails.loc[Prozessdetails["Prozess"] == Prozess]
        return df
    
    def read_materialinfo(Material):
        df = Materialinfos.loc[Materialinfos["Material"] == Material]
        return df
    
    #____________________________________
    #parsen der Eingangsparameter in pandas df
    Zellergebnisse = pd.DataFrame.from_records(json.loads(Zellergebnisse_raw))
    Zellergebnisse = Zellergebnisse.set_index('Beschreibung')
    
    Zellchemie = pd.DataFrame.from_records(json.loads(Zellchemie_raw)) 
    Zellchemie = Zellchemie.set_index('Beschreibung')
    
    #Prozessroute lass ich mir aus dem Frontend in anderer Form ausgeben
    Prozessroute_array_raw2 = ['Mischen','Beschichten und Trocknen','Kalandrieren','Längsschneiden','Vereinzeln','Stapeln','Kontaktieren','Assemblieren','Pouchbeutel / Gehäuse verschließen','Elektrolyt dosieren','Befüllöffnung verschließen','Formieren','Reifelagern','Prüfen und Klassifizieren']
    
    #Prozessroute_array = ast.literal_eval(Prozessroute_array_raw2)
    
    b_json = json.loads(Materialinfos_raw)
    complete_df = []
    for Material_tabelle in b_json:
        Material = list(Material_tabelle.keys())[0]
        for Spalte in Material_tabelle[Material]:
            Spalte["Material"]=Material
            complete_df.append(Spalte)
    Materialinfos = pd.DataFrame.from_records(complete_df)
    Materialinfos = Materialinfos.set_index('Beschreibung')
        
    b_json = json.loads(Prozessdetails_raw)
    complete_df = []
    for Prozess_tabelle in b_json:
        Prozess = list(Prozess_tabelle.keys())[0]
        for Spalte in Prozess_tabelle[Prozess]:
            Spalte["Prozess"]=Prozess
            complete_df.append(Spalte)
    Prozessdetails = pd.DataFrame.from_records(complete_df)
    Prozessdetails = Prozessdetails.set_index('Beschreibung')
    
    Oekonomische_Parameter = pd.DataFrame.from_records(json.loads(Oekonomische_Parameter_raw))
    Oekonomische_Parameter = Oekonomische_Parameter.set_index('Beschreibung')
    
    Mitarbeiter_und_Logistik = pd.DataFrame.from_records(json.loads(Mitarbeiter_und_Logistik_raw))
    Mitarbeiter_und_Logistik = Mitarbeiter_und_Logistik.set_index('Beschreibung')
    
    Gebaeude = pd.DataFrame.from_records(json.loads(Gebaeude_raw))
    Gebaeude = Gebaeude.set_index('Beschreibung')
    
    #____________________________________
    #Kostenrechnung
    
    #leeres DataFrame, wird später gefüllt
    df = pd.DataFrame()
    
    #Anfangsdictionary das dem letzten Schritt übergeben wird, zusätzlich stellt es den Index der Tabelle dar
    # Anfangsmengenwerte errechnen aus dem Zelläquivalent: "wie viel Anodenbeschichtung braucht man für eine Zelle
    
    # Anodenbeschichtung NOCH ÜBERARBEITEN
    Anodenbeschichtung_menge = Zellergebnisse["Wert"]["Zellen pro Jahr"]*Zellergebnisse["Wert"]["Gewicht Anodenbeschichtung"]/1000 #[kg]
    
    # Kathodenbeschichtung
    Kathodenbeschichtung_menge = Zellergebnisse["Wert"]["Zellen pro Jahr"]*Zellergebnisse["Wert"]["Gewicht Kathodenbeschichtung"]/1000 #[kg]
    
    #Anodenkollektor
    Anodenkollektor = Zellchemie.loc[Zellchemie['Kategorie'] == "Kollektorfolie Anode"].index.tolist()[0] #Raussuchen, welcher Anodenkollektor verwendet wurde
    print(Anodenkollektor)
    Anodenkollektor_menge = Zellergebnisse["Wert"]["Zellen pro Jahr"]*Zellergebnisse["Wert"]["Anzahl Wiederholeinheiten"]/Zellergebnisse["Wert"]["Sheets/ Meter Anode"] #[m]

    #Kathodenkollektor
    Kathodenkollektor = Zellchemie.loc[Zellchemie['Kategorie'] == "Kollektorfolie Kathode"].index.tolist()[0] #Raussuchen, welcher Kathodenkollektor verwendet wurde
    Kathodenkollektor_menge = Zellergebnisse["Wert"]["Zellen pro Jahr"]*Zellergebnisse["Wert"]["Anzahl Wiederholeinheiten"]/Zellergebnisse["Wert"]["Sheets/ Meter Kathode"] #[m]
    
    # Separator NOCH ÜBERARBEITEN
    Separator = Zellchemie.loc[Zellchemie['Kategorie'] == "Separator"].index.tolist()[0] #Raussuchen, welcher Separator verwendet wurde
    Separator_menge = Kathodenkollektor_menge
    
    #Elektrolyt
    Elektrolyt = Zellchemie.loc[Zellchemie['Kategorie'] == "Elektrolyt"].index.tolist()[0] #Raussuchen, welches Elektrolyt verwendet wurde
    Elektrolyt_menge = Zellergebnisse["Wert"]["Zellen pro Jahr"]*Zellergebnisse["Wert"]["Gewicht Elektrolyt"]/read_materialinfo(Elektrolyt)["Wert"]["Dichte"]/1000 #[l]
    
    print(Elektrolyt)
    schritt_dictionary={
         "Zelläquivalent":Zellergebnisse["Wert"]["Zellen pro Jahr"],
         "Anodenbeschichtung":Anodenbeschichtung_menge,
         "Kathodenbeschichtung":Kathodenbeschichtung_menge,
         "Anodenkollektor": Anodenkollektor_menge,
         "Kathodenkollektor": Kathodenkollektor_menge,
         "Separator":Separator_menge,
         "Elektrolyt":Elektrolyt_menge,
         "Anzahl Maschinen":"",
         "Neue Materialien":"",
         "Flächenbedarf":"",
         "Flächenbedarf Trockenraum":"",
         "Personlabedarf Facharbeiter":"",
         "Personalbedarf Hilfskraft":"",
         "Energiebedarf":"",
         'Materialkosten':"",
         'Personalkosten':"",
         'Energiekosten':"",
         'Instandhaltungskosten':"",
         'Flächenkosten':"",
         'Kalkulatorische Zinsen':"",
         'Ökonomische Abschreibung':"",
         'Investition':""
         
         }
    
    #Gleiches Dictionary wie zuvor, mit den entsprechenden Einheiten 
    schritt_dictionary_einheiten={
         "Zelläquivalent":"-",
         "Anodenbeschichtung":"kg",
         "Kathodenbeschichtung":"kg",
         "Anodenkollektor":"m",
         "Kathodenkollektor":"m",
         "Separator":"m",
         "Elektrolyt":"l",
         "Anzahl Maschinen":"-",
         "Neue Materialien":"-",
         "Flächenbedarf":"m²",
         "Flächenbedarf Trockenraum":"m²",
         "Personlabedarf Facharbeiter":"-",
         "Personalbedarf Hilfskraft":"-",
         "Energiebedarf":"kWh",
         'Materialkosten': '€', 
         'Personalkosten': '€', 
         'Energiekosten': '€', 
         'Instandhaltungskosten': '€', 
         'Flächenkosten': '€', 
         'Kalkulatorische Zinsen': '€', 
         'Ökonomische Abschreibung': '€', 
         'Investition': '€'
         }
    
    #erste Spalte (index) in das df einfügen 
    df["index"] = schritt_dictionary.keys()
    
    #erste Spalte zum Index umformen
    df = df.set_index('index')
    
    #Prozessschritte, die umgesetzt sind
    Prozessroute_array_test = ["Mischen",
                               #"MultiEx Mischen",
                                "Beschichten und Trocknen",
                               "Kalandrieren",
                               "Längsschneiden",
                               "Vereinzeln",
                               "Stapeln",
                               #"Wickeln",
                               "Kontaktieren",
                               "Assemblieren",
                               "Pouchbeutel / Gehäuse verschließen",
                               "Elektrolyt dosieren",
                               "Befüllöffnung verschließen",
                               "Formieren",
                               "Reifelagern",
                               "Prüfen und Klassifizieren"
                               ]
    
    #____________________________________
    #Materialrückgewinnung
    #Zelle: Das Material, welches am Ende in der Zelle landet
    #Gesamt: Das die Menge des Materials, die zum Prozess zugeeführt wird 
    rueckgewinnung_dict_temp = [{"Material":"Anodenbeschichtung","Zelle":Anodenbeschichtung_menge,"Gesamt":""},
                           {"Material":"Kathodenbeschichtung","Zelle":Kathodenbeschichtung_menge,"Gesamt":""},
                           {"Material":"Anodenkollektor","Zelle":Anodenkollektor_menge,"Gesamt":""},
                           {"Material":"Kathodenkollektor","Zelle":Kathodenkollektor_menge,"Gesamt":""},
                           {"Material":"Separator","Zelle":Separator_menge,"Gesamt":""},
                           {"Material":"Elektrolyt","Zelle":Elektrolyt_menge,"Gesamt":""},
                           ]
    rueckgewinnung_dict = []
    
    #____________________________________
    #Retrograde Materialflusskalkulation
    
    
    print(schritt_dictionary)
    
    for schritt in reversed(Prozessroute_array_raw):        #Prozessschritte in umgekehrter Reihenfolge durchgehen
        Prozess_name = schritt                          #Kopie des Schritts zur Umwandlung in Funktionsname, ersetzen aller Sonderzeichen durch "_"
        Prozess_name = Prozess_name.replace(' ','_').replace('-','_').replace('/','_')    
        #Übergebene Parameter and die Funtionen zu jedem Schritt: read_prozessInfo(schritt):  , 
        schritt_dictionary = getattr(Prozessfunktionen, Prozess_name)(read_prozessInfo(schritt), #df mit den Infos zum Prozesschritt
                                                                      Zellergebnisse, #Zellergebnisse: Ergebnisse der Zellberechnung
                                                                      Zellchemie, #die Zellchemie
                                                                      Materialinfos, #Infos zu den Materialien
                                                                      schritt_dictionary #schritt_dictionary: die Parameter die zwischen den Schritten übergeben werden
                                                                      )  
        #die Informationen jedes Prozessschrittes in das df einfügen
        df[schritt] = df.index.to_series().map(schritt_dictionary)
    
    #____________________________________
    #Abschluss Retrograde Materialflusskalkulation
    
    print(schritt_dictionary)
    
    
    
    
    #____________________________________
    #Anterograde Wertstromkalkulation  
    #Bestimmen der Einzelkosten
    Betriebstage = Mitarbeiter_und_Logistik["Wert"]["Betriebstage"]
    
    Materialkosten = {
        "Anodenbeschichtung_kosten":Zellergebnisse["Wert"]["Kilopreis Anodenbeschichtung"], #[€/kg]
        "Kathodenbeschichtung_kosten":Zellergebnisse["Wert"]["Kilopreis Kathodenbeschichtung"], #[€/kg]
        "Anodenkollektor_kosten":read_materialinfo(Anodenkollektor)["Wert"]["Preis"], #[€/m²]
        "Kathodenkollektor_kosten":read_materialinfo(Kathodenkollektor)["Wert"]["Preis"], #[€/m²]
        "Separator_kosten":read_materialinfo(Separator)["Wert"]["Preis"], #[€/m²]
        "Elektrolyt_kosten":read_materialinfo(Elektrolyt)["Wert"]["Preis"] #[€/kg]
        }
    
    Strompreis = Oekonomische_Parameter["Wert"]["Energiekosten"] #[€/kWh]
    Stundensatz_hilfskraft = Mitarbeiter_und_Logistik["Wert"]["Stundensatz Hilfskraft"] #[€/h]
    Stundensatz_facharbeiter = Mitarbeiter_und_Logistik["Wert"]["Stundensatz Facharbeiter"] #[€/h]
    Instandhaltungskostensatz = Oekonomische_Parameter["Wert"]["Instandhaltungskostensatz"] #[%]
    Flächenkosten_Produktionshalle = Gebaeude["Wert"]["Flächenkosten Produktionshalle"] #[€/m²] dauerhafte Kosten pro Jahr?
    Flächenkosten_Trockenraum = Gebaeude["Wert"]["Flächenkosten Trockenraum"]  #[€/m²] dauerhafte Kosten pro Jahr?
    Zinssatz_Kapitalmarkt = Oekonomische_Parameter["Wert"]["Zinssatz Kapitalmarkt"] #[%]
    Nutzungsdauer = Oekonomische_Parameter["Wert"]["technische Nutzungsdauer"] #[%]
    
    
    Materialkosten_dict = {}
    for schritt in Prozessroute_array_raw:
        
        #Materialkosten
        if df[schritt]["Neue Materialien"]!="":
            liste = df[schritt]["Neue Materialien"].split(";")
            kosten = 0
            for material in liste:
                print(material)
                cost = df[schritt][material]*Materialkosten[material+"_kosten"] 
                print(cost)
                kosten += df[schritt][material]*Materialkosten[material+"_kosten"] 
                print(kosten)
                Materialkosten_dict.update({material:round(cost,2)})
                
                for rueck_material in rueckgewinnung_dict_temp:
                    if material == rueck_material["Material"]:
                        rueck_material["Gesamt"]=df[schritt][material]
                        rueckgewinnung_dict.append(rueck_material)
                        #print(material)
                        #print(df[schritt][material])
                        #print(rueckgewinnung_dict[rueckgewinnung_dict.index(rueck_material)])
                        
            df[schritt]["Materialkosten"]=kosten
        else:
            df[schritt]["Materialkosten"]=0
            
        #Energiekosten
        df[schritt]["Energiekosten"] = df[schritt]["Energiebedarf"]*Strompreis
        
        #Personalkosten
        df[schritt]["Personalkosten"] = (df[schritt]["Personlabedarf Facharbeiter"]*Stundensatz_facharbeiter + df[schritt]["Personalbedarf Hilfskraft"]*Stundensatz_hilfskraft)*Betriebstage*24

        #Instandhaltungskosten
        df[schritt]["Instandhaltungskosten"] = df[schritt]["Investition"]*(Instandhaltungskostensatz/100)
        
        #Flächenkosten
        df[schritt]["Flächenkosten"] = df[schritt]["Flächenbedarf"]*Flächenkosten_Produktionshalle+df[schritt]["Flächenbedarf Trockenraum"]*Flächenkosten_Trockenraum
    
        #Kalkulatorische Zinsen
        df[schritt]["Kalkulatorische Zinsen"]=df[schritt]["Investition"]*1.1*Zinssatz_Kapitalmarkt/100/0.5
        
        #Ökonomische Abschreibung
        df[schritt]["Ökonomische Abschreibung"]=df[schritt]["Investition"]/Nutzungsdauer
    #Abschluss Anterograde Wertstromkalkulation   
    
    
    #OVERHEAD KOSTEN
    #____________________________________
    #Flächenkalkulation    

    #Abschluss Flächenkalkulation
    
    
    
    #____________________________________
    #Overhead Personal
    
    #Abschluss Overhead Personal   
        
        
        
    #____________________________________
    #Klimatisierung
    
    #Abschluss Klimatisierung 
                
        
        
    #____________________________________
    #Steuer
    
    #Abschluss Steuer
                        
        
        
    #____________________________________
    #Investitions-Overhead
    
    #Abschluss Investitions-Overhead
                        
        
        
    #____________________________________
    #Entsorgung
    
    #Abschluss Entsorgung    
                        
        
        
    #____________________________________
    #ORamp up
    
    #Abschluss Ramp up    




    
    #____________________________________
    #Umformen des df
    
    print(Materialkosten_dict)
    
    #Einheiten einfügen
    df["Einheit"] = df.index.to_series().map(schritt_dictionary_einheiten)
    #Index wieder als Spalte einfügen
    df['index'] = df.index.tolist()
    #Zeile "neue Materialien" entfernen, ist in der Anzeige irrelevant/ irreführend
    df = df.drop("Neue Materialien",axis=0)
    #Reihenfolge im df drehen
    df = df.iloc[:, ::-1] 
    
    return(df,Materialkosten_dict, rueckgewinnung_dict)
#Kostenberechnung()